<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metodo-pago</title>
    <meta name="description" content="Jardinería Hernández, transformando tu patio, contamos con una gran variedad de servicios...">
    <meta name="keywords" content="Jardinería, Servicios de Jardinería, Plantas, Jardin">
    <link rel="icon" href="{{ url_for('static', filename='img/iconoverde.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilosM.css') }}">
</head>
<body>
    <header>
    <div class="logo1">
        <figure class="logo__Empresa">
            <a href="{{ url_for('index') }}"><img src="{{ url_for('static', filename='img/CapturaLogo3.JPG') }}" alt="Logo de la Jardinería Hernández" title="Logo de la Jardinería Hernández" class="logo"></a>
        </figure>
    </div>
    <nav class="menu">
            <!-- Menu-->
        <ul class="menu__superior">
            <li class="menu__icono">
                <div class="iconoBusqueda" alt="Buscar">
                    <img src="{{ url_for('static', filename='img/search-alt-regular-36.png') }}" alt="lupa" class="icon buscarIcono">
                    <div class="busqueda">
                        <input type="text" placeholder="Buscar..." class="inputBuscar">
                        <span class="limpiarBuscar"><strong>&times;</strong></span>
                    </div>
                </div>
                <a href="{{ url_for('carrito') }}"><img src="{{ url_for('static', filename='img/cart-alt-regular-36.png') }}" alt="carrito" class="icon"></a>
                <a href="{{ url_for('perfil') }}"><img src="{{ url_for('static', filename='img/user-circle-regular-36.png') }}" alt="usuario" class="icon"></a>
            </li>
        </ul>
        <ul class="menu__horizontal">
            <li class="menu__Empresa"><a href="{{ url_for('index') }}">Inicio</a></li>
            <li class="menu__Empresa"><a href="{{ url_for('servicios') }}">Servicios</a></li>
            <li class="menu__Empresa"><a href="{{ url_for('catalogo') }}">Productos</a>
                <ul class="menu__vertical">
                    <li><a href="{{ url_for('plantas') }}">Plantas</a></li>
                    <li><a href="{{ url_for('fertilizantes') }}">Fertilizantes</a></li>
                    <li><a href="{{ url_for('herramientas') }}">Herramientas</a></li>
                    <li><a href="{{ url_for('accesorios') }}">Accesorios</a></li>
                </ul>
            </li>
            <li class="menu__Empresa"><a href="{{ url_for('contactos') }}">Contacto</a></li>
            <li class="menu__Empresa"><a href="{{ url_for('nosotros') }}">Nosotros</a></li>
        </ul>
        <div class="flecha">
            <a href="javascript:history.back()">
            <figure>
                <img src="{{ url_for('static', filename='img/left-arrow-alt-regular-24.png') }}" alt="atras" class="atras">
            </figure>
            </a>
        </div>
    </nav>
    </header>
    <main>
        <div class="container-pago">
            <div class="pago-caja">
                <h2 class="titulo-confirmar">Confirmar transacción</h2>
                <div class="total">
                    <p class="totaltitu">Total</p>
                    <a class="cambiar" href="{{ url_for('carrito') }}">Cambiar</a>
                </div>
                <p class="presio" id="presioTotal">RD$500.00</p>
                <hr>
                <div class="correo">
                    <p>Correo:</p>
                    <p class="direccion-p">{{ correo }}</p>
                    <!-- Campo oculto para correo -->
                    <input type="hidden" name="correo" value="{{ correo }}">
                </div>
                <div class="pago-metodo">
                    <p>Método de pago:</p>
                    <img id="imagen-tarjeta" alt="Tarjeta de crédito">
                    <p class="direccion-p" id="numero-tarjeta">**** 0000</p>
                    <a class="cambiar2" href="{{ url_for('procedePago') }}">Cambiar</a>
                </div>
                <div class="direccion">
                    <p>Dirección:</p>
                    <p class="direccion-p">{{ sector }}, {{ calle }}, Santiago, RD.</p>
                    <!-- Campos ocultos para dirección -->
                    <input type="hidden" name="direccionEnvio" value="{{ sector }}, {{ calle }}, Santiago, RD.">
                </div>
                <hr>
                <br>
                <div class="checkbox">
                    <input type="checkbox" id="terms" name="terms">
                    <label for="terms">Activar pagos automáticos con mi tarjeta.</label>
                </div>
                <!-- Formulario para enviar datos -->
                <form action="{{ url_for('procesar_compra') }}" method="post">
                    <input type="hidden" name="total" id="totalValue" value="500.00"> <!-- Campo oculto para el total -->
                    <input type="hidden" name="nombreProducto" id="nombreProducto" value=""> <!-- Campo oculto para los nombres de los productos -->
                    <input type="hidden" name="direccionEnvio" value="{{ sector }}, {{ calle }}, Santiago, RD."> <!-- Campo oculto para dirección -->
                    <button type="submit" class="siguente-boton">Confirmar</button>
                </form>
            </div>
        </div>
    </main>
    <footer class="footer">
        <p class="texto__footer">&copy; Todos los derechos reservados - Jardinería Hernández 2024.</p>
    </footer>
    <script src="{{ url_for('static', filename='js/metodo-pago.js') }}"></script>
    <script src="{{ url_for('static', filename='js/carrito.js') }}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const nombreProductoInput = document.getElementById('nombreProducto');
    
    if (nombreProductoInput && carrito.length > 0) {
        // Concatenar los nombres de todos los productos en el carrito, separados por comas
        const nombresProductos = carrito.map(producto => producto.nombre).join(', ');
        nombreProductoInput.value = nombresProductos;
    }

    // Asegúrate de actualizar el total también
    const totalInput = document.getElementById('totalValue');
    if (totalInput) {
        const totalFinal = sessionStorage.getItem('totalFinal');
        if (totalFinal) {
            totalInput.value = totalFinal;
        }
    }
    });
    </script>
</body>
</html>